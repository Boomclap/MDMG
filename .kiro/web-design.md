# 健康指导模板管理系统 - 设计方案

## 1. 整体布局

- 顶部导航栏：标题 + 返回按钮 + 新建模板按钮
- 主内容区：模板列表 + 详情编辑区（左右分栏或上下布局）
- 底部操作栏：保存、取消、删除等操作按钮

## 2. 功能模块设计

### 2.1 模板列表区域

显示所有已创建的模板，每个模板卡片显示：

- 模板名称
- 模板类型/分类
- 创建时间
- 使用次数统计
- 快速操作按钮（编辑、复制、删除）

### 2.2 模板编辑区域

分为以下几个部分：

#### 基础信息编辑

- 模板名称输入框
- 模板描述/说明
- 适用疾病/场景选择

#### 建议项目管理

按照现有数据结构，分为四个标签页：

**文本建议 (text)**

- 建议内容输入框
- 是否默认选中开关
- 添加/删除按钮

**多选建议 (multiple)**

- 分组标题输入
- 组内选项列表
- 每个选项：内容 + 默认选中状态
- 添加组/删除组功能
- 组内添加选项/删除选项功能

**单选建议 (single)**

- 分组标题输入
- 组内选项列表
- 默认选中项设置（单选）
- 添加组/删除组功能
- 组内添加选项/删除选项功能

**数值设置 (numeric)**

- 设置项标题
- 单位设置
- 默认值设置
- 最小值/最大值设置
- 步长设置
- 是否默认选中开关

## 3. 交互设计

### 3.1 新建模板流程

1. 点击"新建模板"按钮
2. 弹出模板基础信息填写对话框
3. 确认后进入详细编辑界面
4. 分步骤添加各类建议项目

### 3.2 编辑模板流程

1. 从列表选择要编辑的模板
2. 右侧显示详细编辑界面
3. 实时预览功能
4. 保存确认机制

### 3.3 删除模板流程

1. 选择要删除的模板
2. 二次确认对话框
3. 检查是否有关联使用记录
4. 执行删除操作

## 4. 数据结构扩展

在现有模板数据基础上，增加管理字段：

```javascript
{
  id: 'template-001',
  name: '糖尿病饮食指导',
  description: '针对糖尿病患者的饮食管理指导',
  category: 'diabetes',
  createdAt: timestamp,
  updatedAt: timestamp,
  usageCount: 0,
  isActive: true,
  suggestions: {
    // 现有的建议结构
  }
}
```

## 5. 界面组件设计

### 5.1 可复用组件

- 建议项编辑器：支持不同类型建议的统一编辑界面
- 默认值设置器：统一的默认选中状态设置组件
- 数值范围设置器：专门用于数值类型的范围和步长设置
- 预览组件：实时预览模板在实际使用中的效果

### 5.2 特殊功能组件

- 模板导入/导出：支持 JSON 格式的模板数据导入导出
- 模板复制器：基于现有模板创建新模板
- 使用统计图表：显示模板使用频率和效果

## 6. 用户体验优化

### 6.1 操作便利性

- 拖拽排序功能
- 批量操作支持
- 快捷键支持
- 自动保存草稿

### 6.2 数据验证

- 必填字段验证
- 数值范围合理性检查
- 重复项检测
- 保存前完整性验证

### 6.3 错误处理

- 友好的错误提示
- 操作撤销功能
- 数据恢复机制

## 7. 技术实现要点

- 使用现有的样式系统保持界面一致性
- 采用组件化开发提高代码复用性
- 实现响应式设计适配不同屏幕
- 本地存储支持离线编辑
- 数据校验和错误处理机制

## 8. 当前实现状态

### 已完成功能

✅ 基础模板列表展示
✅ 模板搜索和分页
✅ 新建/编辑模板弹窗
✅ 文本建议编辑器
✅ 基础的增删改操作

### 待完成功能

🔲 多选建议编辑器实现
🔲 单选建议编辑器实现  
🔲 数值设置编辑器实现
🔲 模板预览功能
🔲 模板复制功能
🔲 导入/导出功能
🔲 使用统计功能
🔲 拖拽排序功能

## 9. 下一步开发计划

### 优先级 1：核心编辑功能

1. 完善多选建议编辑器
2. 完善单选建议编辑器
3. 完善数值设置编辑器
4. 添加模板预览功能

### 优先级 2：用户体验优化

1. 实现模板复制功能
2. 添加数据验证和错误处理
3. 实现自动保存功能
4. 优化移动端适配

### 优先级 3：高级功能

1. 模板导入/导出
2. 使用统计和分析
3. 拖拽排序
4. 批量操作功能
